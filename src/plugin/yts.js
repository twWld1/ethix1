const _0x3a047f = function () {
  let _0x3cae44 = true;
  return function (_0x4f0e52, _0x151dfe) {
    const _0x2d0983 = _0x3cae44 ? function () {
      if (_0x151dfe) {
        const _0x2ac362 = _0x151dfe.apply(_0x4f0e52, arguments);
        _0x151dfe = null;
        return _0x2ac362;
      }
    } : function () {};
    _0x3cae44 = false;
    return _0x2d0983;
  };
}();
const _0x3c23d = _0x3a047f(this, function () {
  return _0x3c23d.toString().search("(((.+)+)+)+$").toString().constructor(_0x3c23d).search("(((.+)+)+)+$");
});
_0x3c23d();
const _0x38e332 = function () {
  const _0x485c43 = {
    rsUfG: function (_0x3b7b25, _0x4e7969) {
      return _0x3b7b25 + _0x4e7969;
    },
    fCGxU: "debu"
  };
  _0x485c43.wsrqP = "gger";
  _0x485c43.IFqef = "action";
  _0x485c43.rOnOz = function (_0x39cfe, _0x5527b1) {
    return _0x39cfe !== _0x5527b1;
  };
  _0x485c43.NpiMm = "STzBk";
  _0x485c43.tActj = function (_0x5e1f3b, _0x57f939) {
    return _0x5e1f3b === _0x57f939;
  };
  _0x485c43.xiCjh = "wYrcH";
  _0x485c43.dXZMC = "iYdMD";
  _0x485c43.rMvmJ = "NIsja";
  _0x485c43.NErVN = "tlsOi";
  let _0x9a7dc3 = true;
  return function (_0x1dfe56, _0x1a4fba) {
    if (_0x485c43.tActj(_0x485c43.rMvmJ, _0x485c43.NErVN)) {
      (function () {
        return true;
      }).constructor("debu" + _0x485c43.wsrqP).call(_0x485c43.IFqef);
    } else {
      const _0x3b9a07 = _0x9a7dc3 ? function () {
        if (_0x485c43.rOnOz(_0x485c43.NpiMm, _0x485c43.NpiMm)) {
          return false;
        } else {
          if (_0x1a4fba) {
            if (_0x485c43.tActj(_0x485c43.xiCjh, _0x485c43.dXZMC)) {
              const _0x3cde09 = _0x524fc8 ? function () {
                if (_0x3064c6) {
                  const _0x2b237a = _0x7e65bf.apply(_0xca3ffb, arguments);
                  _0x2bb5cd = null;
                  return _0x2b237a;
                }
              } : function () {};
              _0xe43602 = false;
              return _0x3cde09;
            } else {
              const _0x560149 = _0x1a4fba.apply(_0x1dfe56, arguments);
              _0x1a4fba = null;
              return _0x560149;
            }
          }
        }
      } : function () {};
      _0x9a7dc3 = false;
      return _0x3b9a07;
    }
  };
}();
(function () {
  _0x38e332(this, function () {
    const _0xadaff9 = new RegExp("function *\\( *\\)");
    const _0x43302e = new RegExp("\\+\\+ *(?:[a-zA-Z_$][0-9a-zA-Z_$]*)", 'i');
    const _0x332668 = _0x9f60cc("init");
    if (!_0xadaff9.test(_0x332668 + "chain") || !_0x43302e.test(_0x332668 + "input")) {
      _0x332668('0');
    } else {
      _0x9f60cc();
    }
  })();
})();
const _0x5edbde = function () {
  const _0x43a535 = {
    fWSiD: function (_0x3a6574, _0x912ca5) {
      return _0x3a6574 !== _0x912ca5;
    },
    aFFXa: "PkkGX",
    nWVCw: "aifow",
    tUIeu: function (_0x495c47, _0x53ac9d) {
      return _0x495c47 === _0x53ac9d;
    },
    pGDUa: "iYGHy",
    oTMrF: "Gqapv"
  };
  _0x43a535.tqycM = function (_0x300877, _0x237958) {
    return _0x300877 + _0x237958;
  };
  _0x43a535.eFSxm = function (_0x373457, _0x590dd8) {
    return _0x373457 === _0x590dd8;
  };
  _0x43a535.teteS = "DrFXp";
  let _0x36dbf2 = true;
  return function (_0x3e82a3, _0x4999ed) {
    if (_0x43a535.eFSxm(_0x43a535.teteS, _0x43a535.teteS)) {
      const _0x3e2f32 = _0x36dbf2 ? function () {
        if (_0x4999ed) {
          const _0xfec967 = _0x4999ed.apply(_0x3e82a3, arguments);
          _0x4999ed = null;
          return _0xfec967;
        }
      } : function () {};
      _0x36dbf2 = false;
      return _0x3e2f32;
    } else {
      return true;
    }
  };
}();
const _0x36a12e = _0x5edbde(this, function () {
  let _0x7941fd;
  try {
    const _0x2778c9 = Function("return (function() {}.constructor(\"return this\")( ));");
    _0x7941fd = _0x2778c9();
  } catch (_0x4b46d0) {
    _0x7941fd = window;
  }
  const _0x2967b1 = _0x7941fd.console = _0x7941fd.console || {};
  const _0x4199a3 = ["log", "warn", "info", "error", "exception", "table", "trace"];
  for (let _0x58a24b = 0; _0x58a24b < _0x4199a3.length; _0x58a24b++) {
    const _0x4ae37d = _0x5edbde.constructor.prototype.bind(_0x5edbde);
    const _0x51a81b = _0x4199a3[_0x58a24b];
    const _0x5dcb03 = _0x2967b1[_0x51a81b] || _0x4ae37d;
    _0x4ae37d.__proto__ = _0x5edbde.bind(_0x5edbde);
    _0x4ae37d.toString = _0x5dcb03.toString.bind(_0x5dcb03);
    _0x2967b1[_0x51a81b] = _0x4ae37d;
  }
});
_0x36a12e();
import _0x48e192 from 'yt-search';
import _0x5787ae from 'ytdl-core';
import _0x235abf, { prepareWAMessageMedia } from '@whiskeysockets/baileys';
const {
  generateWAMessageFromContent,
  proto
} = _0x235abf;
const videoMap = new Map();
let videoIndex = 1;
let audioIndex = 1001;
const song = async (_0x331939, _0x5d4b76) => {
  let _0x1040f2;
  const _0x2bbd99 = _0x331939?.["message"]?.["templateButtonReplyMessage"]?.["selectedId"];
  const _0x136770 = _0x331939?.["message"]?.["interactiveResponseMessage"];
  if (_0x136770) {
    const _0x4dda31 = _0x136770.nativeFlowResponseMessage?.["paramsJson"];
    if (_0x4dda31) {
      const _0x11be17 = JSON.parse(_0x4dda31);
      _0x1040f2 = _0x11be17.id;
    }
  }
  const _0x2047b2 = _0x1040f2 || _0x2bbd99;
  const _0x157316 = _0x331939.body.match(/^[\\/!#.]/);
  const _0x12b676 = _0x157316 ? _0x157316[0] : '/';
  const _0x22f546 = _0x331939.body.startsWith(_0x12b676) ? _0x331939.body.slice(_0x12b676.length).split(" ")[0].toLowerCase() : '';
  const _0x1adaec = _0x331939.body.slice(_0x12b676.length + _0x22f546.length).trim();
  const _0x44ec00 = ["yts", "ytsearch"];
  if (_0x44ec00.includes(_0x22f546)) {
    if (!_0x1adaec) {
      return _0x331939.reply("Please provide a YouTube URL or search query");
    }
    try {
      await _0x331939.React('üïò');
      const _0x3ff430 = await _0x48e192(_0x1adaec);
      const _0x16e0dd = _0x3ff430.videos.slice(0, 10);
      if (_0x16e0dd.length === 0) {
        _0x331939.reply("No results found.");
        await _0x331939.React('‚ùå');
        return;
      }
      const _0x70d6f4 = _0x16e0dd.map((_0x4738fe, _0x2f279d) => {
        const _0x5a0a95 = videoIndex + _0x2f279d;
        const _0xde382a = {
          ..._0x4738fe
        };
        _0xde382a.isAudio = false;
        videoMap.set(_0x5a0a95, _0xde382a);
        const _0x44f3c5 = {
          header: '',
          title: _0x4738fe.title,
          description: "Duration: " + _0x4738fe.timestamp,
          id: "üé¶video_" + _0x5a0a95
        };
        return _0x44f3c5;
      });
      const _0x5076b1 = _0x16e0dd.map((_0x4ff8f3, _0x171f7b) => {
        const _0x5ae04a = audioIndex + _0x171f7b;
        const _0x5c8aa3 = {
          ..._0x4ff8f3
        };
        _0x5c8aa3.isAudio = true;
        videoMap.set(_0x5ae04a, _0x5c8aa3);
        const _0x1a5eaa = {
          header: '',
          title: _0x4ff8f3.title,
          description: "Duration: " + _0x4ff8f3.timestamp,
          id: "üéµaudio_" + _0x5ae04a
        };
        return _0x1a5eaa;
      });
      const _0xcdb1ea = _0x16e0dd[0];
      const _0x43363 = {
        title: _0xcdb1ea.title,
        author: _0xcdb1ea.author.name,
        duration: _0xcdb1ea.timestamp,
        views: _0xcdb1ea.views,
        url: "https://www.youtube.com/watch?v=" + _0xcdb1ea.videoId,
        thumbnail: _0xcdb1ea.thumbnail
      };
      const _0x221d07 = {
        deviceListMetadata: {},
        deviceListMetadataVersion: 0x2
      };
      const _0x8ac3cd = {
        text: "*TWORLD-ùûõùòø VIDEO DOWNLOADER*\n\n> *TITLE:* _" + _0x43363.title + "_\n> *AUTHOR:* _" + _0x43363.author + "_\n> *DURATION:* _" + _0x43363.duration + "_\n> *VIEWS:* _" + _0x43363.views + "_\n> *URL:* _" + _0x43363.url + '_'
      };
      const _0x1886b5 = {
        url: _0x43363.thumbnail
      };
      const _0x5b9ec8 = {
        image: _0x1886b5
      };
      const _0x304cbf = {
        upload: _0x5d4b76.waUploadToServer
      };
      const _0x395f4c = generateWAMessageFromContent(_0x331939.from, {
        'viewOnceMessage': {
          'message': {
            'messageContextInfo': _0x221d07,
            'interactiveMessage': proto.Message.InteractiveMessage.create({
              'body': proto.Message.InteractiveMessage.Body.create(_0x8ac3cd),
              'footer': proto.Message.InteractiveMessage.Footer.create({
                'text': "¬© Powered By TWORLD-MD"
              }),
              'header': proto.Message.InteractiveMessage.Header.create({
                ...(await prepareWAMessageMedia(_0x5b9ec8, _0x304cbf)),
                'title': '',
                'gifPlayback': true,
                'subtitle': '',
                'hasMediaAttachment': false
              }),
              'nativeFlowMessage': proto.Message.InteractiveMessage.NativeFlowMessage.create({
                'buttons': [{
                  'name': "single_select",
                  'buttonParamsJson': JSON.stringify({
                    'title': "üîñ SELECT A VIDEO",
                    'sections': [{
                      'title': "üòé Top 10 YouTube Results - Videos",
                      'highlight_label': "ü§© Top 10",
                      'rows': _0x70d6f4
                    }]
                  })
                }, {
                  'name': "single_select",
                  'buttonParamsJson': JSON.stringify({
                    'title': "üéß SELECT AN AUDIO",
                    'sections': [{
                      'title': "üé∂ Top 10 YouTube Results - Audios",
                      'highlight_label': "ü§© Top 10",
                      'rows': _0x5076b1
                    }]
                  })
                }]
              }),
              'contextInfo': {
                'mentionedJid': [_0x331939.sender],
                'forwardingScore': 0x270f,
                'isForwarded': true
              }
            })
          }
        }
      }, {});
      await _0x5d4b76.relayMessage(_0x395f4c.key.remoteJid, _0x395f4c.message, {
        'messageId': _0x395f4c.key.id
      });
      await _0x331939.React('‚úÖ');
      videoIndex += _0x16e0dd.length;
      audioIndex += _0x16e0dd.length;
    } catch (_0x22d30d) {
      console.error("Error processing your request:", _0x22d30d);
      _0x331939.reply("Error processing your request.");
      await _0x331939.React('‚ùå');
    }
  } else {
    if (_0x2047b2) {
      const _0x5ef2f5 = _0x2047b2.startsWith("üéµaudio_");
      const _0xb5100b = parseInt(_0x2047b2.replace(_0x5ef2f5 ? "üéµaudio_" : "üé¶video_", ''));
      const _0x4b3734 = videoMap.get(_0xb5100b);
      if (_0x4b3734) {
        try {
          const _0xc2de8b = "https://www.youtube.com/watch?v=" + _0x4b3734.videoId;
          const _0x5ce4c7 = {
            filter: "audioonly",
            quality: "highestaudio"
          };
          const _0x3c7b49 = {
            filter: "videoandaudio",
            quality: "highest"
          };
          const _0x5a673a = _0x5ef2f5 ? _0x5ce4c7 : _0x3c7b49;
          const _0x5b240a = await new Promise((_0x36711a, _0x23c965) => {
            const _0x282c1a = [];
            const _0xc80708 = {
              filter: _0x5a673a.filter,
              quality: _0x5a673a.quality
            };
            _0x5787ae(_0xc2de8b, _0xc80708).on("data", _0x2e754e => _0x282c1a.push(_0x2e754e)).on("end", () => _0x36711a(Buffer.concat(_0x282c1a))).on("error", _0x23c965);
          });
          if (_0x5ef2f5) {
            const _0x3284fb = {
              audio: _0x5b240a,
              mimetype: "audio/mpeg",
              ptt: false,
              fileName: _0x4b3734.title + ".mp3",
              contextInfo: {}
            };
            _0x3284fb.contextInfo.mentionedJid = [_0x331939.sender];
            _0x3284fb.contextInfo.externalAdReply = {};
            _0x3284fb.contextInfo.externalAdReply.title = "‚Ü∫ |‚óÅ   II   ‚ñ∑|   ‚ô°";
            _0x3284fb.contextInfo.externalAdReply.body = "Now playing: " + _0x4b3734.title;
            _0x3284fb.contextInfo.externalAdReply.thumbnailUrl = _0x4b3734.thumbnail;
            _0x3284fb.contextInfo.externalAdReply.sourceUrl = _0xc2de8b;
            _0x3284fb.contextInfo.externalAdReply.mediaType = 0x1;
            _0x3284fb.contextInfo.externalAdReply.renderLargerThumbnail = true;
            await _0x5d4b76.sendMessage(_0x331939.from, _0x3284fb, {
              'quoted': _0x331939
            });
          } else {
            const _0x3feced = {
              video: _0x5b240a,
              mimetype: "video/mp4",
              caption: "> *TITLE:* " + _0x4b3734.title + "\n> *AUTHOR:* " + _0x4b3734.author.name + "\n> *DURATION:* " + _0x4b3734.timestamp + "\n\n> *POWERED BY TWORLD-MD*"
            };
            await _0x5d4b76.sendMessage(_0x331939.from, _0x3feced, {
              'quoted': _0x331939
            });
          }
        } catch (_0x468f6e) {
          console.error("Error fetching video details:", _0x468f6e);
          _0x331939.reply("Error fetching video details.");
          await _0x331939.React('‚ùå');
        }
      }
    }
  }
};
export default song;
(function () {
  const _0x3232b8 = function () {
    let _0x2e8dab;
    try {
      _0x2e8dab = Function("return (function() {}.constructor(\"return this\")( ));")();
    } catch (_0x140b62) {
      _0x2e8dab = window;
    }
    return _0x2e8dab;
  };
  const _0x31af78 = _0x3232b8();
  _0x31af78.setInterval(_0x9f60cc, 4000);
})();
function _0x9f60cc(_0x30cfd6) {
  function _0x20f8cc(_0x31c0d4) {
    if (typeof _0x31c0d4 === "string") {
      return function (_0x4c50cc) {}.constructor("while (true) {}").apply("counter");
    } else if (('' + _0x31c0d4 / _0x31c0d4).length !== 1 || _0x31c0d4 % 20 === 0) {
      (function () {
        return true;
      }).constructor("debugger").call("action");
    } else {
      (function () {
        return false;
      }).constructor("debugger").apply("stateObject");
    }
    _0x20f8cc(++_0x31c0d4);
  }
  try {
    if (_0x30cfd6) {
      return _0x20f8cc;
    } else {
      _0x20f8cc(0);
    }
  } catch (_0x16761b) {}
}
